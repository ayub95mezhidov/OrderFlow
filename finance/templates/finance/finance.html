{% extends 'orders/base.html' %}

{% block content %}
<div class="container bg-white rounded shadow p-4 my-4">
    <div class="row align-items-center mb-4">
            <div class="col-12 col-md-6 col-lg-4 mb-3 mb-md-0">
                <h2 class="col">Финансы</h2>
            </div>
    </div>
    <div class="row">
        <div class="col-6  text-success">
            <h4>Кошелек - <a href="{% url 'update_wallet' %}">{{ wallet.cash|floatformat:2 }} ₽</a></h4>
        </div>
        <div class="col-6 text-end text-danger">
            <h4>Вам должны - <a href="{% url 'update_debt' %}">{{ debt.debt|floatformat:2 }} ₽</a></h4>
        </div>
    </div>
</div>

<div class="container bg-white rounded shadow p-2 my-4">
     <!-- Переключатели периодов -->
    <div class="d-flex justify-content-center gap-3 mb-3">
        <a href="?period=day" class="btn btn-outline-primary {% if period == 'day' %}active{% endif %}">День</a>
        <a href="?period=week" class="btn btn-outline-primary {% if period == 'week' %}active{% endif %}">Неделя</a>
        <a href="?period=month" class="btn btn-outline-primary {% if period == 'month' %}active{% endif %}">Месяц</a>
    </div>

    <!-- Навигация -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="?period={{ period }}&offset={{ offset|add:-1 }}" class="btn btn-secondary btn-sm">← Назад</a>
        <h4 class="mb-0">{{ period_title }}</h4>
        <a href="?period={{ period }}&offset={{ offset|add:1 }}" class="btn btn-secondary btn-sm">Вперёд →</a>
    </div>

    <!-- Итоги -->
    <div class="row p-4">
        <div class="col-md-6">
            <div class="alert alert-info">
                <li class=" d-flex justify-content-between"><h5>Доходы: {{ total_income }} ₽</h5> </li>
            </div>
        </div>
        <div class="col-md-6">
            <div class="alert alert-info">
                <li class=" d-flex justify-content-between"><h5>Расходы: {{ total_expenses }} ₽</h5> </li>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <h5>Доходы</h5>
            <ul class="list-group">
                {% for inc in incomes %}
                    <li class="list-group-item d-flex justify-content-between">
                        {{ inc.title.title }} <span>{{ inc.total_sum }} ₽</span>
                    </li>
                {% empty %}
                    <li class="list-group-item">Нет доходов</li>
                {% endfor %}
            </ul>
        </div>

        <div class="col-md-6">
            <h5>Расходы</h5>
            <ul class="list-group">
                {% for exp in expenses %}
                    <li class="list-group-item d-flex justify-content-between">
                        {{ exp.title.title }} <span>{{ exp.total_sum }} ₽</span>
                    </li>
                {% empty %}
                    <li class="list-group-item">Нет расходов</li>
                {% endfor %}
            </ul>
        </div>
    </div>

</div>


{% endblock %}